(()=>{"use strict";var t={544:(t,e,n)=>{var r=n(294),o=n(935),i=n(512),c=n(194),a=n(379),s=n.n(a),u=n(399);s()(u.Z,{insert:"head",singleton:!1}),u.Z.locals;var l=n(709),h=n(8),f=n(438);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(a,t);var e,n,o,i,c=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=b(o);if(i){var n=b(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return v(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=c.call(this,t)).afterRender=function(){var t=e.props,n=t.width,r=t.height,o=n/e.verticalCount,i=r/e.horizontalCount;e.ctx.strokeStyle="#ebe1e1";for(var c=0;c<e.verticalCount;c++)e.ctx.beginPath(),e.ctx.moveTo(c*o,0),e.ctx.lineTo(c*o,r),e.ctx.stroke();for(var a=0;a<e.horizontalCount;a++)e.ctx.beginPath(),e.ctx.moveTo(0,a*i),e.ctx.lineTo(n,a*i),e.ctx.stroke()},e.canvas$=r.createRef(),e.verticalCount="5",e.horizontalCount="5",e}return e=a,(n=[{key:"componentDidMount",value:function(){var t=this;this.ctx=this.canvas.getContext("2d"),setTimeout((function(){t.afterRender()}),0)}},{key:"render",value:function(){return r.createElement("canvas",{id:"canvasBg",ref:this.canvas$,width:this.props.width,height:this.props.height,onMouseMove:this.onMouseMove},"您的浏览器不支持画图")}},{key:"canvas",get:function(){return this.canvas$.current}}])&&d(e.prototype,n),a}(r.Component);var m=n(873);s()(m.Z,{insert:"head",singleton:!1}),m.Z.locals;var w="select",S="curve",x="line",k="rect",C="oRect",j="circle",E="oCircle",O=16;function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(o){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return _(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,t)).finishShape=null,e.historys=[],e.fillShape=function(t){e.ctx.fillStyle=t,e.ctx.fill()},e.strokeShape=function(t){e.ctx.strokeStyle=t,e.ctx.stroke()},e}return e=c,(n=[{key:"initCanvas",value:function(){this.clearRect(0,0),this.getImageData(),this.historys=[this.imgdata]}},{key:"drawTable",value:function(){this.ctxbg.moveTo(0,0),this.ctxbg.lineTo(500,500),this.ctxbg.stroke()}},{key:"drawArc",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props,o=r.color;this.fillStyle=o,this.ctx.beginPath(),this.ctx.arc(t,e,n,0,2*Math.PI),this.ctx.fill()}},{key:"drawLine",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.props,i=o.lineWidth,c=o.color;this.ctx.beginPath(),this.ctx.lineWidth=i,this.ctx.lineCap="round",this.ctx.moveTo(t,e),this.ctx.lineTo(n,r),this.ctx.strokeStyle=c,this.ctx.stroke(),this.ctx.closePath()}},{key:"drawRect",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.props,i=o.lineWidth,c=o.color,a=o.brush;this.ctx.lineWidth=i,this.ctx.beginPath(),this.ctx.rect(t,e,n,r),this.setShapeType(a)(c),this.ctx.closePath()}},{key:"drawCircle",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props,o=r.lineWidth,i=r.color,c=r.brush;this.ctx.lineWidth=o,this.ctx.beginPath(),this.ctx.arc(t,e,n,0,2*Math.PI),this.setShapeType(c)(i)}},{key:"drawEllipse",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.props,i=o.lineWidth,c=o.color,a=o.brush;this.ctx.lineWidth=i,this.ctx.beginPath(),this.ctx.ellipse(t,e,n,r,0,0,2*Math.PI),this.setShapeType(a)(c)}},{key:"initDraw",value:function(){this.clearRect(0,0),this.putImageData()}},{key:"clearRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.canvasWidth,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.canvasHeight;this.ctx.clearRect(t,e,n,r)}},{key:"setShapeType",value:function(t){if(null!==this.finishShape)return this.finishShape;var e=[C,E,w];return this.finishShape=e.includes(t)?this.strokeShape:this.fillShape,this.finishShape}},{key:"getImageData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.canvasWidth,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.canvasHeight;return this.imgdata=this.ctx.getImageData(t,e,n,r),this.imgdata}},{key:"putImageData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.imgdata;n&&this.ctx.putImageData(n,t,e)}},{key:"canvasWidth",get:function(){return this.props.canvas.width}},{key:"canvasHeight",get:function(){return this.props.canvas.height}}])&&P(e.prototype,n),c}(r.Component);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var A;function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const H=(0,i.$j)((function(t){return{color:t.color,lineWidth:t.lineWidth,canvas:t.canvas,brush:t.brush}}))(A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(a,t);var e,n,o,i,c=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(o);if(i){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return N(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=c.call(this,t)).onMouseDown=function(t){var n=t.pageX,r=t.pageY;if(e.points.cx=n,e.points.cy=r,e.points.mx=n,e.points.my=r,e.props.brush===w&&e.hasSelect&&!e.withinSelectScope(n,r))return e.hasSelect=!1,void e.props.cancel.next();if(e.props.brush===w&&e.hasSelect&&e.withinSelectScope(n,r)){e.isMove=!0;var o=e.points,i=o.x,c=o.y,a=o.endX,s=o.endY;return e.moveData[0]=e.imgdata,e.selectRectData=e.getImageData(i+1,c+1,a-i-2,s-c-2),void e.onKeyDelete()}e.setState({canDraw:!0}),e.points.x=n,e.points.y=r,e.getImageData(),e.initBrushSetting(e.keyCode),e.historys.length<=0&&e.historys.push(e.imgdata)},e.onMouseUp=function(t){var n=t.pageX,r=t.pageY;n<e.points.x?(e.points.endX=e.points.x,e.points.endY=e.points.y,e.points.x=n,e.points.y=r):(e.points.endX=n,e.points.endY=r),e.setState({canDraw:!1}),e.getImageData(),e.finishShape=null,e.historys.push(e.imgdata),e.isMove&&(e.isMove=!1,e.moveData[1]=null)},e.onMouseMove=function(t){var n=t.pageX,r=t.pageY;if(e.onDrawBefore(n,r),!e.state.canDraw)return!1;e.draw(n,r,e.points),e.points.mx=n,e.points.my=r},e.onMouseLeave=function(t){e.setState({canDraw:!1}),t.stopPropagation()},e.hasSelect=!1,e.paint=null,e.ctx=null,e.useKeys=[O],e.isMove=!1,e.moveData=[],e.keyCode=null,e.points={mx:0,my:0,cx:0,cy:0,x:0,y:0,endX:0,endY:0},e.state={canDraw:!1},e.canvas$=r.createRef(),e}return e=a,(n=[{key:"withinSelectScope",value:function(t,e){if(this.props.brush!=w)return!1;var n=this.points,r=n.x,o=n.y,i=n.endX,c=n.endY;return r<i?this.isSelectScope(r,o,i,c,t,e):this.isSelectScope(i,c,r,o,t,e)}},{key:"isSelectScope",value:function(t,e,n,r,o,i){return o>=t&&i>=e&&o<=n&&i<=r}},{key:"onDrawBefore",value:function(t,e){var n=this.points,r=n.x,o=n.y,i=n.cx,c=n.cy;if(this.isMove){this.canvasObj.style.cursor="move",this.moveData[1]||(this.getImageData(),this.moveData[1]=this.imgdata),this.putImageData(0,0,this.moveData[1]);var a=this.selectRectData,s=a.width,u=a.height;this.ctx.clearRect(r+t-i,o+e-c,s,u),this.putImageData(r+t-i,o+e-c,this.selectRectData)}else this.canvasObj.style.cursor="inherit"}},{key:"initBrushSetting",value:function(t){var e=this.props.brush,n=[C,k],r=[j,E];if(this.keyCode=t,w==e)return this.hasSelect=!0,void(this.draw=this.drawSelectScope);if(S!=e){if(x!=e)return n.includes(e)?(this.draw=t===O?this.drawBrushSquare:this.drawBrushRect,void console.log(this.draw)):void(r.includes(e)&&(this.draw=t===O?this.drawBrushCircle:this.drawBrushEllipse));this.draw=this.drawBrushLine}else this.draw=t===O?this.drawBrushLine:this.drawBrushCurve}},{key:"drawSelectScope",value:function(t,e,n){n.x,n.y;var r={brush:this.props.brush,lineWidth:1,color:"#000"};this.ctx.save(),this.ctx.setLineDash([1,3]),this.drawBrushRect(t,e,this.points,r),this.ctx.restore()}},{key:"drawBrushLine",value:function(t,e,n){var r=n.x,o=n.y;this.initDraw(),this.drawLine(r,o,t,e)}},{key:"drawBrushCurve",value:function(t,e,n){var r=n.mx,o=n.my;this.drawLine(r,o,t,e)}},{key:"drawBrushCircle",value:function(t,e,n){var r=n.x,o=n.y;this.initDraw(),this.drawCircle(r,o,Math.abs(t-r))}},{key:"drawBrushRect",value:function(t,e,n,r){var o=n.x,i=n.y,c=t-o,a=e-i;this.initDraw(),this.drawRect(o,i,c,isNaN(e)?c:a,r)}},{key:"drawBrushSquare",value:function(t,e,n){var r=n.x,o=n.y;this.drawBrushRect(Math.max(t,e),"null",{x:r,y:o})}},{key:"drawBrushEllipse",value:function(t,e,n){var r=n.x,o=n.y;this.initDraw(),this.drawEllipse(r,o,Math.abs(t-r),Math.abs(e-o))}},{key:"componentDidMount",value:function(){var t=this;this.ctx=this.canvas$.current.getContext("2d"),this.props.download.subscribe((function(e){var n=t.canvasObj.toDataURL();e.setAttribute("href",n)})),this.props.cancel.pipe((0,l.U)((function(){return t.historys.pop()})),(0,h.h)((function(t){return void 0!==t})),(0,l.U)((function(e){return e===t.imgdata?t.historys.pop():e})),(0,h.h)((function(t){return void 0!==t})),(0,f.b)((function(e){return t.imgdata=e})),(0,f.b)((function(e){return t.ctx.putImageData(e,0,0)}))).subscribe(),this.props.clear.subscribe((function(){t.initCanvas()})),this.props.keyup.subscribe((function(e){e.keyCode===O&&t.initBrushSetting(-1)})),this.props.keydown.subscribe((function(e){var n=e.keyCode;46!==n?n!==O||t.initBrushSetting(n):t.onKeyDelete()}))}},{key:"onKeyDelete",value:function(){if(this.props.brush==w){var t=this.points,e=t.x,n=t.y,r=t.endX,o=t.endY;this.clearRect(e-1,n-1,r-e+2,o-n+2),this.hasSelect=!1,this.getImageData(),this.historys.push(this.imgdata)}}},{key:"componentWillUnmount",value:function(){this.props.download.unsubscribe(),this.props.cancel.unsubscribe()}},{key:"render",value:function(){var t=this.props,e=t.clientWidth,n=t.clientHeight;return r.createElement(r.Fragment,null,r.createElement(g,{width:e,height:n}),r.createElement("canvas",{id:"canvas",ref:this.canvas$,width:e,height:n,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,onMouseDown:this.onMouseDown,onMouseLeave:this.onMouseLeave},"您的浏览器不支持画图"))}},{key:"canvasObj",get:function(){return this.canvas$.current}}])&&B(e.prototype,n),a}(T))||A;var Z="CHANGE_WEIGHT",U="CHANGE_COLOR",$="CHANGE_CANVAS_RECT",V="CHANGE_BRUSH",X=n(163);const Y=function(t){return r.createElement("svg",{t:"1609052441661",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"50"},r.createElement("path",{d:"M35.500095 597.784331c1.110532-0.502882 2.224057-0.997782 3.342571-1.483702-4.368291 1.900775-0.384146 0.182594 0.438027-0.14867 2.386695-0.959867 4.802326-1.846895 7.221948-2.71297 5.508756-1.97062 11.114297-3.671839 16.749771-5.24135 11.592234-3.227826 23.405977-5.639465 35.278587-7.569176 2.938469-0.477938 5.885918-0.902993 8.835362-1.311086-4.309422 0.597672 0.666519-0.06286 1.290133-0.13969 1.485698-0.182594 2.973391-0.348226 4.462082-0.51286 6.434698-0.716408 12.890349-1.23725 19.352985-1.636363a357.481442 357.481442 0 0 1 36.192557-0.388137c5.432924 0.216519 10.858864 0.611641 16.270835 1.140465 1.329046 0.129712 9.516847 1.152439 4.35532 0.449002 2.864633 0.390133 5.716295 0.863082 8.560972 1.375942 4.542903 0.820177 9.042901 1.856873 13.494007 3.079156 2.234035 0.612638 4.469067 1.254212 6.679155 1.945675 1.166407 0.365188 2.308868 0.803215 3.451329 1.238248-4.666628-1.782039 0.409091 0.255432 1.349001 0.719401 4.316406 2.133258 8.348444 4.811306 12.225826 7.650995 3.380486 2.475498-3.000331-2.39368 0.278382 0.218514 0.942904 0.752328 1.866851 1.527605 2.790797 2.303879 2.154212 1.804988 4.245564 3.68481 6.324941 5.575607 7.17605 6.522503 14.029817 13.406203 21.644891 19.429815 8.726604 6.903656 17.975048 12.905316 28.935686 15.596334 12.553099 3.083147 25.149102 1.188359 36.860073-3.862415 20.805756-8.974054 36.420051-28.591451 51.86572-44.446211 3.844455-3.945231 7.767735-7.809642 11.833698-11.525383a144.845059 144.845059 0 0 1 5.944787-5.114632c3.371506-2.761861-2.995342 2.212083 0.44102-0.336253 1.297117-0.960864 2.638136-1.857871 3.988135-2.73991 1.929711-1.261197 3.95022-2.369733 6.007647-3.400442 3.663857-1.833924-4.428158 1.715188 0.237473-0.130709 1.365964-0.5398 2.745897-1.042682 4.125829-1.545565 5.585585-2.032482 11.31086-3.661861 17.109971-4.958978 2.480487-0.554767 4.986916-0.991796 7.499331-1.38592-4.936029 0.772283-0.763303 0.10776 0.226497-0.001995 1.19235-0.132705 2.389689-0.225499 3.586029-0.317295 4.967958-0.383148 9.959863-0.322284 14.925825 0.037916 1.105543 0.08082 2.20909 0.199556 3.310642 0.317295 3.963191 0.426053-4.212637-0.633592-0.298337-0.030932 2.139245 0.32827 4.259533 0.764301 6.37084 1.233259 4.506983 1.003769 8.920174 2.391684 13.251546 3.985143 0.993791 0.366186 1.977604 0.76031 2.961418 1.153436 3.566074 1.428824-3.787582-1.650332-0.272395-0.096785 1.941684 0.859091 3.849444 1.794013 5.746229 2.74889 4.142792 2.086363 8.154875 4.429156 12.08913 6.882702 3.689799 2.300886 7.274831 4.766406 10.809973 7.296782a260.941018 260.941018 0 0 1 5.311195 3.921284c0.800221 0.60266 3.915298 3.015298-0.01796-0.032926 1.173392 0.90898 2.335808 1.831928 3.498224 2.754876 14.846002 11.793786 28.89777 24.551431 43.861511 36.200539 24.738016 19.258196 51.715055 34.80963 82.725131 41.018829 48.853416 9.784253 98.087984-4.243568 143.553929-21.651875 74.075356-28.361961 144.598607-66.189883 214.210883-103.918026 8.357424-4.530929 10.954652-15.8817 6.263079-23.889901-4.92206-8.402325-15.520503-10.800993-23.889901-6.265075-48.235788 26.143891-96.832774 51.745986-146.574216 74.926464a1260.898456 1260.898456 0 0 1-28.707194 12.947223c-2.15521 0.938913-4.316406 1.868846-6.4786 2.792793-0.910975 0.390133-4.677603 1.983591-0.06286 0.03592a839.474138 839.474138 0 0 1-16.282809 6.667181c-14.684362 5.841017-29.565287 11.217068-44.695657 15.788907-12.082146 3.649888-24.35387 6.720064-36.797213 8.857313-1.323059 0.226497-2.648114 0.437029-3.975164 0.640576-1.639356 0.251441-6.968511 0.949889 0.108758 0.016963-2.704988 0.356208-5.419953 0.646563-8.136914 0.891019-4.896118 0.439024-9.810195 0.659534-14.726269 0.676497-4.576827 0.015965-9.153655-0.191574-13.712522-0.591685-2.057427-0.180599-10.062634-1.214301-2.168181-0.145677a146.065347 146.065347 0 0 1-6.633256-1.065631c-8.748555-1.596452-17.342454-4.023058-25.71684-6.997447-1.235254-0.438026-8.300551-3.305653-3.364522-1.212306-2.118292-0.897006-4.201661-1.87184-6.274055-2.868624-4.471062-2.151219-8.810417-4.567847-13.06995-7.108201-3.929267-2.344788-7.752768-4.864189-11.519397-7.45942a260.26951 260.26951 0 0 1-5.594565-3.985142 290.500318 290.500318 0 0 1-2.763857-2.046452c-0.822173-0.613636-5.092681-3.894344-1.020731-0.746341-14.999661-11.602212-29.048435-24.368836-43.863506-36.200538-16.10221-12.861413-32.556638-24.026597-51.594324-32.05176-18.104759-7.632037-38.571269-10.188355-58.013057-7.583146-12.451325 1.66929-24.297994 4.616739-35.993998 9.242458-11.650106 4.606761-21.359525 11.803764-30.639898 20.152208-8.656759 7.788688-16.523274 16.429483-24.611297 24.792894-3.846451 3.97716-7.755762 7.892458-11.795782 11.674053a160.915341 160.915341 0 0 1-5.91186 5.242348c-0.969844 0.822173-1.965631 1.614412-2.961418 2.405653 3.766628-2.991351-0.631596 0.356208-1.411862 0.89501-1.912749 1.321064-3.9143 2.503436-5.954764 3.611972-0.974833 0.528825-1.981596 0.994789-2.987361 1.458758 4.559865-2.099334 1.254212-0.5847 0.17561-0.217517-1.426829 0.48592-8.683699 1.78603-3.103103 1.052661-2.507427 0.330266-5.044787 0.306319-7.560196 0.123725-3.819511-0.275388 4.26951 0.732372 0.542793 0.030931-1.006762-0.188581-1.994567-0.460975-2.981373-0.731374-0.984811-0.270399-1.947671-0.614634-2.910531-0.959867-3.523169-1.259201 3.80155 1.740132 0.392129 0.154656-1.895786-0.88204-3.708757-1.938691-5.489798-3.029267-0.911973-0.558758-1.796008-1.159423-2.680044-1.760088-0.897006-0.607649-5.010863-3.721728-0.858092-0.506873-16.493341-12.769618-29.756861-29.213069-48.201864-39.516169-15.924605-8.896227-34.606083-11.89556-52.456408-14.12261-18.601655-2.320842-37.4777-2.423613-56.172148-1.413858-39.549096 2.135254-79.834555 9.181592-116.08199 25.610078-8.66973 3.929267-10.696226 16.323718-6.263079 23.889901 5.175497 8.833366 15.221169 10.193344 23.890898 6.263079z",stroke:t.color,strokeWidth:5*t.weight,fill:t.color}))};var K,z=n(356);function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t,e){return!e||"object"!==G(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(){var t=ot(["\n  ","}\n"]);return et=function(){return t},t}function nt(){var t=ot(["\n  ","\n"]);return nt=function(){return t},t}function rt(){var t=ot(["\n  ","\n"]);return rt=function(){return t},t}function ot(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}s()(z.Z,{insert:"head",singleton:!1}),z.Z.locals;var it=X.ZP.div(rt(),(function(t){return"\n      width: 50%;\n      height: ".concat(t.weight,"px;\n      max-height: 30px;\n      background-color: ").concat(t.color,";\n    ")})),ct=function(t){return"\n  width: 20px;\n  height: 20px;\n  border: ".concat(t.weight,"px solid ").concat(t.color,";\n  display: inline-block;\n  vertical-align: text-top;\n  background: ").concat(t.fill?t.color:"transparent",";\n")},at=X.ZP.div(nt(),(function(t){return ct(t)})),st=X.ZP.div(et(),(function(t){return"\n      ".concat(ct(t),"\n      border-radius: 50%;\n    ")}));const ut=(0,i.$j)((function(t){return{color:t.color,brush:t.brush,lineWidth:t.lineWidth}}),(function(t){return{changeColor:function(e){t({type:U,payload:e})},changeWeight:function(e){t({type:Z,payload:e})},changeBrush:function(e){t({type:V,payload:e})}}}))(K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(a,t);var e,n,o,i,c=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(o);if(i){var n=tt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return J(this,t)});function a(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=c.call(this,t)).ACTIVE_CLASS="active",n.state={weight:1,selectIndex:-1,selectCateIndex:-1},n.events={clear:"clear",select:"select"},n.eventsObj=(Q(e={},n.events.clear,n.props.clear),Q(e,n.events.select,n.props.select),e),n.brushs=[{custom:"true",brush:S,child:Y},{brush:x,child:it},{brush:C,child:at},{brush:k,fill:"true",child:at},{brush:E,child:st},{brush:j,fill:"true",child:st}],n.onChangeColor=function(t){n.props.changeColor(t.target.value)},n.onSelect=function(t){var e=t.currentTarget.getAttribute("data-index");t.preventDefault(),n.setState({selectIndex:e})},n.onCancelSelect=function(){n.setState({selectIndex:-1})},n.onSelectGor=function(t,e,r){n.setState({selectCateIndex:e,weight:r}),n.props.changeWeight(r),t.stopPropagation()},n.onSelectShape=function(t){var e=t.currentTarget.getAttribute("data-brush");n.props.changeBrush(e),t.stopPropagation()},n.onDownload=function(t){n.props.download.next(t.currentTarget),t.stopPropagation()},n.onCancel=function(t){n.onSelect(t),n.props.cancel.next()},n.onClick=function(t){var e=t.currentTarget.getAttribute("data-event");n.eventsObj[e].next(),t.stopPropagation()},n}return e=a,(n=[{key:"render",value:function(){var t=this;return r.createElement("div",{className:"toolbar"},r.createElement("ul",null,r.createElement("li",{"data-index":"1",onClick:this.onSelect,className:1==this.state.selectIndex?this.ACTIVE_CLASS:""},r.createElement("div",{className:"item"},"画笔"),r.createElement("div",{className:"item-categories"},r.createElement("div",{onClick:function(t){return t.stopPropagation()}},r.createElement("input",{type:"color",value:this.props.color,onChange:this.onChangeColor})),[2,5].map((function(e,n){return r.createElement("div",{key:"sub-"+n,onClick:function(r){return t.onSelectGor(r,n,e)},className:t.state.selectCateIndex==n?t.ACTIVE_CLASS:""},r.createElement(it,{color:t.props.color,weight:e}))})))),r.createElement("li",{"data-index":"2",onClick:this.onSelect,className:2==this.state.selectIndex?this.ACTIVE_CLASS:""},r.createElement("div",{className:"item"},"形状"),r.createElement("div",{className:"item-categories"},this.brushs.map((function(e,n){return r.createElement("div",{key:n,"data-brush":e.brush,onClick:t.onSelectShape,className:t.props.brush==e.brush?t.ACTIVE_CLASS:""},r.createElement(e.child,{fill:e.fill,color:t.props.color,weight:t.state.weight}))})))),r.createElement("li",{"data-index":"3",onClick:this.onSelect,className:3==this.state.selectIndex?this.ACTIVE_CLASS:""},r.createElement("div",{className:"item"},"工具"),r.createElement("div",{className:"item-categories"},r.createElement("div",null,r.createElement("a",{href:"",onClick:this.onDownload,download:"download"},"下载")),r.createElement("div",{"data-event":this.events.select,"data-brush":w,onClick:this.onSelectShape,className:this.props.brush==w?this.ACTIVE_CLASS:""},"选区"),r.createElement("div",{"data-event":this.events.clear,onClick:this.onClick},"清空画布"))),r.createElement("li",{"data-index":"4",onMouseDown:this.onCancel,onMouseUp:this.onCancelSelect,className:4==this.state.selectIndex?this.ACTIVE_CLASS:""},r.createElement("div",{className:"item"},"撤销"),r.createElement("div",{className:"item-categories"}))))}}])&&q(e.prototype,n),a}(r.Component))||K;function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(){return(ht=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(s,t);var e,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vt(o);if(i){var n=vt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return yt(this,t)});function s(){var t;ft(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=a.call.apply(a,[this].concat(n))).state={height:0,width:0},t.downSubject=new c.xQ,t.cancelSubject=new c.xQ,t.clearSubject=new c.xQ,t.keydownSubject=new c.xQ,t.keyupSubject=new c.xQ,t.selectSubject=new c.xQ,t.commonProps={clear:t.clearSubject,keyup:t.keyupSubject,keydown:t.keydownSubject,download:t.downSubject,cancel:t.cancelSubject,select:t.selectSubject},t.onKeyup=function(e){t.keyupSubject.next(e)},t.onKeyDown=function(e){t.keydownSubject.next(e)},t}return e=s,(n=[{key:"componentDidMount",value:function(){var t=document.body,e=t.clientHeight,n=t.clientWidth;this.setState({height:e,width:n}),this.props.changeCanvas(n,e),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyup)}},{key:"render",value:function(){return r.createElement("main",null,r.createElement(ut,this.commonProps),r.createElement(H,ht({},this.commonProps,{clientHeight:this.state.height,clientWidth:this.state.width})))}}])&&pt(e.prototype,n),s}(r.Component);const gt=(0,i.$j)(null,(function(t){return{changeCanvas:function(e,n){t({type:$,payload:{width:e,height:n}})}}}))(bt);var mt=n(890),wt={lineWidth:2,color:"#000000",brush:S,canvas:{width:0,height:0}},St=(0,mt.MT)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Z:return Object.assign({},t,{lineWidth:e.payload});case U:return Object.assign({},t,{color:e.payload});case $:var n=Object.assign(t.canvas,e.payload);return Object.assign({},t,n);case V:return Object.assign({},t,{brush:e.payload});default:return t}}));o.render(r.createElement(i.zt,{store:St},r.createElement(gt,null)),document.getElementById("app"))},399:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(15),o=n.n(r),i=n(645),c=n.n(i)()(o());c.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=c},873:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(15),o=n.n(r),i=n(645),c=n.n(i)()(o());c.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=c},356:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(15),o=n.n(r),i=n(645),c=n.n(i)()(o());c.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=c}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r](o,o.exports,n),o.loaded=!0,o.exports}n.m=t,n.x=t=>{},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0},e=[[544,592]],r=t=>{},o=(o,i)=>{for(var c,a,[s,u,l,h]=i,f=0,p=[];f<s.length;f++)a=s[f],n.o(t,a)&&t[a]&&p.push(t[a][0]),t[a]=0;for(c in u)n.o(u,c)&&(n.m[c]=u[c]);for(l&&l(n),o&&o(i);p.length;)p.shift()();return h&&e.push.apply(e,h),r()},i=self.webpackChunkpainter=self.webpackChunkpainter||[];function c(){for(var r,o=0;o<e.length;o++){for(var i=e[o],c=!0,a=1;a<i.length;a++){var s=i[a];0!==t[s]&&(c=!1)}c&&(e.splice(o--,1),r=n(n.s=i[0]))}return 0===e.length&&(n.x(),n.x=t=>{}),r}i.forEach(o.bind(null,0)),i.push=o.bind(null,i.push.bind(i));var a=n.x;n.x=()=>(n.x=a||(t=>{}),(r=c)())})(),n.x()})();
//# sourceMappingURL=main.js.map